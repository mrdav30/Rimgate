<?xml version="1.0" encoding="utf-8"?>
<Defs>

	<!-- =============== Tau'ri =============== -->

	<!-- Sites -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_GateSiteTauri</defName>
		<description>Tau'ri outpost containing a Dwarfgate.</description>
		<tags>
			<li>Rimgate_GateSiteTauri_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_GateSiteTauri</defName>
		<linkWithSite>Rimgate_GateSiteTauri</linkWithSite>
		<order>450</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureSGC</li>
				<li>Rimgate_StructureIndustrialTown</li>
				<li>Rimgate_StructureTauriForwardOutpost</li>
				<li>Rimgate_StructureTauriLostBase</li>
				<li>Rimgate_StructureTauriResearchCenter</li>
			</structureLayoutDefs>
			<preventBridgeable>true</preventBridgeable>
		</genStep>
	</GenStepDef>

	<!-- Pawns -->

	<SitePartDef ParentName="Rimgate_SoldierBase">
		<defName>Rimgate_SoldierTauri</defName>
		<label>Tau'ri presence detected</label>
		<tags>
			<li>Rimgate_SoldierTauri_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_SoldierTauri</defName>
		<linkWithSite>Rimgate_SoldierTauri</linkWithSite>
		<order>450</order>
		<genStep Class="Rimgate.GenStep_EnemiesPresence_NoSiteFaction">
			<forcedFaction>Rimgate_TauriFaction</forcedFaction>
			<defaultPointsRange>90~90</defaultPointsRange>
		</genStep>
	</GenStepDef>

	<!-- =============== Replicator =============== -->

	<SitePartDef ParentName="Rimgate_SoldierBase">
		<defName>Rimgate_SoldierReplicator</defName>
		<label>Replicator presence detected</label>
		<tags>
			<li>Rimgate_SoldierReplicator_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_SoldierReplicator</defName>
		<linkWithSite>Rimgate_SoldierReplicator</linkWithSite>
		<order>450</order>
		<genStep Class="Rimgate.GenStep_EnemiesPresence_NoSiteFaction">
			<forcedFaction>Rimgate_Replicator</forcedFaction>
			<defaultPointsRange>90~90</defaultPointsRange>
		</genStep>
	</GenStepDef>

	<!-- =============== Goa'uld =============== -->

	<!-- Sites -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_GateSiteGoauld</defName>
		<description>Goa'uld outpost containing a Dwarfgate.</description>
		<tags>
			<li>Rimgate_GateSiteGoauld_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_GateSiteGoauld</defName>
		<linkWithSite>Rimgate_GateSiteGoauld</linkWithSite>
		<order>450</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureGoauldLostBase</li>
				<li>Rimgate_StructureGoauldNaquadahStorehouse</li>
				<li>Rimgate_StructureGoauldSarcophagusChamber</li>
				<li>Rimgate_StructureGoauldTemple</li>
				<li>Rimgate_StructureGoauldHatak</li>
			</structureLayoutDefs>
			<preventBridgeable>true</preventBridgeable>
		</genStep>
	</GenStepDef>

	<!-- Pawns -->

	<SitePartDef ParentName="Rimgate_SoldierBase">
		<defName>Rimgate_SoldierGoauld</defName>
		<label>Goa'uld presence detected</label>
		<tags>
			<li>Rimgate_SoldierGoauld_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_SoldierGoauld</defName>
		<linkWithSite>Rimgate_SoldierGoauld</linkWithSite>
		<order>450</order>
		<genStep Class="Rimgate.GenStep_EnemiesPresence_NoSiteFaction">
			<forcedFaction>Rimgate_GoauldBaal</forcedFaction>
			<defaultPointsRange>90~90</defaultPointsRange>
		</genStep>
	</GenStepDef>

	<!-- =============== Wraith =============== -->

	<!-- Sites -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_GateSiteWraith</defName>
		<description>Wraith outpost containing a Dwarfgate.</description>
		<tags>
			<li>Rimgate_GateSiteWraith_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_GateSiteWraith</defName>
		<linkWithSite>Rimgate_GateSiteWraith</linkWithSite>
		<order>450</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureWraithHiveSiteAlpha</li>
				<li>Rimgate_StructureWraithHiveSiteBravo</li>
				<li>Rimgate_StructureWraithHiveSiteCharlie</li>
				<li>Rimgate_StructureWraithHiveSiteDelta</li>
			</structureLayoutDefs>
			<preventBridgeable>true</preventBridgeable>
		</genStep>
	</GenStepDef>

	<!-- Pawns -->

	<SitePartDef ParentName="Rimgate_SoldierBase">
		<defName>Rimgate_SoldierWraith</defName>
		<label>Wraith presence detected</label>
		<tags>
			<li>Rimgate_SoldierWraith_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_SoldierWraith</defName>
		<linkWithSite>Rimgate_SoldierWraith</linkWithSite>
		<order>450</order>
		<genStep Class="Rimgate.GenStep_EnemiesPresence_NoSiteFaction">
			<forcedFaction>Rimgate_WraithEmpire</forcedFaction>
			<defaultPointsRange>90~90</defaultPointsRange>
		</genStep>
	</GenStepDef>

	<!-- =============== Mech =============== -->

	<!-- Sites -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_GateSiteMech</defName>
		<description>Mechanoid outpost containing a Dwarfgate.</description>
		<tags>
			<li>Rimgate_GateSiteMech_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_GateSiteMech</defName>
		<linkWithSite>Rimgate_GateSiteMech</linkWithSite>
		<order>450</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureMechHiveAlpha</li>
				<li>Rimgate_StructureMechHiveBravo</li>
			</structureLayoutDefs>
			<preventBridgeable>true</preventBridgeable>
		</genStep>
	</GenStepDef>

	<!-- Pawns -->

	<SitePartDef ParentName="Rimgate_SoldierBase">
		<defName>Rimgate_SoldierMech</defName>
		<label>Mechanoid presence detected</label>
		<tags>
			<li>Rimgate_SoldierMech_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_SoldierMech</defName>
		<linkWithSite>Rimgate_SoldierMech</linkWithSite>
		<order>450</order>
		<genStep Class="Rimgate.GenStep_EnemiesPresence_NoSiteFaction">
			<forcedFaction>Mechanoid</forcedFaction>
			<defaultPointsRange>90~90</defaultPointsRange>
		</genStep>
	</GenStepDef>

	<!-- =============== Misc =============== -->

	<!-- Sites-->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_GateSiteMisc</defName>
		<!-- <lootTable>
			<li>
				<thing>Steel</thing>
				<weight>1</weight>
			</li>
			<li>
				<thing>Gold</thing>
				<weight>0.25</weight>
			</li>
			<li>
				<thing>Silver</thing>
				<weight>0.25</weight>
			</li>
			<li>
				<thing>ComponentIndustrial</thing>
				<weight>0.5</weight>
			</li>
		</lootTable> -->
		<tags>
			<li>Rimgate_GateSiteMisc_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_GateSiteMisc</defName>
		<linkWithSite>Rimgate_GateSiteMisc</linkWithSite>
		<order>450</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureAncientComplexAlpha</li>
				<li>Rimgate_StructureAncientComplexBravo</li>
				<li>Rimgate_StructureAncientComplexCharlie</li>
				<li>Rimgate_StructureAncientComplexDelta</li>
				<li>Rimgate_StructureCastleAlpha</li>
				<li>Rimgate_StructureCastleBravo</li>
				<li>Rimgate_StructureCastleDelta</li>
				<li>Rimgate_StructureCavernAlpha</li>
				<li>Rimgate_StructureJadeHengeAlpha</li>
				<li>Rimgate_StructureJadeHengeBravo</li>
				<li>Rimgate_StructureMazeAlpha</li>
				<li>Rimgate_StructureMazeBravo</li>
				<li>Rimgate_StructureNaquadahMine</li>
				<li>Rimgate_StructureRansackedVilla</li>
				<li>Rimgate_StructureStrangeVillageAlpha</li>
				<li>Rimgate_StructureStrangeVillageBravo</li>
				<li>Rimgate_StructureStrangeVillageCharlie</li>
				<li>Rimgate_StructureTraderOutpost</li>
				<li>Rimgate_StructureUnasVillage</li>
			</structureLayoutDefs>
			<preventBridgeable>true</preventBridgeable>
		</genStep>
	</GenStepDef>

	<!-- Barren -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_BarrenGate</defName>
		<tags>
			<li>Rimgate_Rimgate_BarrenGate_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_BarrenGate</defName>
		<linkWithSite>Rimgate_BarrenGate</linkWithSite>
		<order>390</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureBarrenGate</li>
				<li>Rimgate_StructureBarrenGateNoDHD</li>
			</structureLayoutDefs>
		</genStep>
	</GenStepDef>

	<!-- Bandit camp -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_BanditCamp</defName>
		<label>bandit camp</label>
		<description>A bandit camp known for its ruthless inhabitants and frequent raids on nearby settlements. Also, they have a Dwarfgate.</description>
		<tags>
			<li>Rimgate_BanditCamp_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_BanditCamp_Gate</defName>
		<linkWithSite>Rimgate_BanditCamp</linkWithSite>
		<order>390</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureBarrenGate</li>
				<li>Rimgate_StructureBarrenGateNoDHD</li>
			</structureLayoutDefs>
		</genStep>
	</GenStepDef>

	<GenStepDef>
		<defName>Rimgate_BanditCamp</defName>
		<linkWithSite>Rimgate_BanditCamp</linkWithSite>
		<order>410</order>
		<genStep Class="GenStep_Outpost">
			<pawnGroupKindDef>Settlement</pawnGroupKindDef>
		</genStep>
	</GenStepDef>

	<GenStepDef>
		<defName>Rimgate_BanditCampTurrets</defName>
		<linkWithSite>Rimgate_BanditCamp</linkWithSite>
		<order>415</order>
		<genStep Class="GenStep_Turrets">
			<widthRange>
				<min>3</min>
				<max>4</max>
			</widthRange>
			<guardsCountRange>
				<min>1</min>
				<max>1</max>
			</guardsCountRange>
		</genStep>
	</GenStepDef>

	<GenStepDef>
		<defName>Rimgate_BanditCampPower</defName>
		<linkWithSite>Rimgate_BanditCamp</linkWithSite>
		<order>420</order>
		<genStep Class="GenStep_Power" />
	</GenStepDef>

	<!-- Ancient Complex (mechanitor) -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_AncientComplex_Mechanitor</defName>
		<description>An ancient complex known to contain a Dwarfgate.</description>
		<tags>
			<li>AncientComplex_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_AncientComplex_Mechanitor_Gate</defName>
		<linkWithSite>Rimgate_AncientComplex_Mechanitor</linkWithSite>
		<order>390</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureBarrenGate</li>
				<li>Rimgate_StructureBarrenGateNoDHD</li>
			</structureLayoutDefs>
		</genStep>
	</GenStepDef>

	<GenStepDef>
		<defName>Rimgate_AncientComplex_Mechanitor</defName>
		<linkWithSite>Rimgate_AncientComplex_Mechanitor</linkWithSite>
		<order>410</order>
		<genStep Class="Rimgate.GenStep_AncientComplex_GateSite">
			<layoutDef>AncientComplex_Mechanitor_Loot</layoutDef>
			<symbolStack>ancientMechanitorComplex</symbolStack>
		</genStep>
	</GenStepDef>

	<!-- Ancient Complex (loot) -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_AncientComplex_Loot</defName>
		<description>An ancient complex known to contain a Dwarfgate.</description>
		<tags>
			<li>AncientComplex_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_AncientComplex_Loot_Gate</defName>
		<linkWithSite>Rimgate_AncientComplex_Loot</linkWithSite>
		<order>390</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureBarrenGate</li>
				<li>Rimgate_StructureBarrenGateNoDHD</li>
			</structureLayoutDefs>
		</genStep>
	</GenStepDef>

	<GenStepDef>
		<defName>Rimgate_AncientComplex_Loot</defName>
		<linkWithSite>Rimgate_AncientComplex_Loot</linkWithSite>
		<order>410</order>
		<genStep Class="Rimgate.GenStep_AncientComplex_GateSite">
			<layoutDef>AncientComplex_Loot</layoutDef>
			<symbolStack>ancientComplex</symbolStack>
		</genStep>
	</GenStepDef>

	<!-- Pawns -->

	<SitePartDef ParentName="Rimgate_SoldierBase">
		<defName>Rimgate_EnemyPresence</defName>
		<tags>
			<li>Rimgate_EnemyPresence_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_EnemyPresence</defName>
		<linkWithSite>Rimgate_EnemyPresence</linkWithSite>
		<order>450</order>
		<genStep Class="Rimgate.GenStep_EnemiesPresence_NoSiteFaction">
			<useSiteFactionIfAny>false</useSiteFactionIfAny>
			<pawnGroupKindDef>Combat</pawnGroupKindDef>
			<defaultPointsRange>90~150</defaultPointsRange>
		</genStep>
	</GenStepDef>

	<SitePartDef ParentName="Rimgate_SoldierBase">
		<defName>Rimgate_EnemyPresenceOrbit</defName>
		<tags>
			<li>Rimgate_EnemyPresenceOrbit_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_EnemyPresenceOrbit</defName>
		<linkWithSite>Rimgate_EnemyPresenceOrbit</linkWithSite>
		<order>450</order>
		<genStep Class="Rimgate.GenStep_EnemiesPresence_NoSiteFaction">
			<useSiteFactionIfAny>false</useSiteFactionIfAny>
			<pawnGroupKindDef>OrbitalCombat</pawnGroupKindDef>
			<defaultPointsRange>90~150</defaultPointsRange>
		</genStep>
	</GenStepDef>

	<!-- =============== Vault quest =============== -->

	<SitePartDef ParentName="Rimgate_GateSiteBase">
		<defName>Rimgate_GateSiteVault</defName>
		<description>A hidden vault containing a Dwarfgate.</description>
		<tags>
			<li>Rimgate_GateSiteVault_tag</li>
			<li>Rimgate_GateQuestSite_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_GateSiteVault</defName>
		<linkWithSite>Rimgate_GateSiteVault</linkWithSite>
		<order>450</order>
		<genStep Class="KCSG.GenStep_CustomStructureGen">
			<fullClear>true</fullClear>
			<structureLayoutDefs>
				<li>Rimgate_StructureTreasureVault</li>
				<li>Rimgate_StructureAbandonedVault</li>
			</structureLayoutDefs>
			<preventBridgeable>true</preventBridgeable>
		</genStep>
	</GenStepDef>

	<!-- =============== Loot =============== -->

	<!-- Item stash -->

	<SitePartDef>
		<defName>Rimgate_ItemStash</defName>
		<description>A stash of valuable items.</description>
		<workerClass>SitePartWorker_ItemStash</workerClass>
		<handlesWorldObjectTimeoutInspectString>true</handlesWorldObjectTimeoutInspectString>
		<tags>
			<li>Rimgate_ItemStash_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_ItemStash</defName>
		<linkWithSite>Rimgate_ItemStash</linkWithSite>
		<order>400</order>
		<genStep Class="GenStep_ItemStash">
			<count>1</count>
			<thingSetMakerDef>MapGen_AncientTempleContents</thingSetMakerDef>
			<nearMapCenter>true</nearMapCenter>
		</genStep>
	</GenStepDef>

	<!-- Orbital item stash -->

	<SitePartDef>
		<defName>Rimgate_OrbitalItemStash</defName>
		<description>A stash of valuable items.</description>
		<workerClass>SitePartWorker_ItemStash</workerClass>
		<handlesWorldObjectTimeoutInspectString>true</handlesWorldObjectTimeoutInspectString>
		<tags>
			<li>Rimgate_OrbitalItemStash_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>Rimgate_OrbitalItemStash</defName>
		<linkWithSite>Rimgate_OrbitalItemStash</linkWithSite>
		<order>500</order>
		<genStep Class="GenStep_AsteroidItemStash" />
	</GenStepDef>

	<!-- Supply crates -->

	<SitePartDef>
		<defName>Rimgate_SupplyCrates</defName>
		<tags>
			<li>Rimgate_SupplyCrates_tag</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<order>900</order>
		<defName>Rimgate_SupplyCrates</defName>
		<linkWithSite>Rimgate_SupplyCrates</linkWithSite>
		<genStep Class="GenStep_ScatterGroup">
			<minSpacing>22</minSpacing>
			<count>3</count>
			<groups>
				<!-- Prefer indoor ruins -->
				<li>
					<things>
						<!-- junk -->
						<AncientSmallCrate>0.83</AncientSmallCrate>
						<AncientMetalCrate>0.73</AncientMetalCrate>
						<AncientMilitaryCrate>0.40</AncientMilitaryCrate>
						<AncientAmmoStack>0.30</AncientAmmoStack>

						<!-- mid loot -->
						<AncientBox_ComponentIndustrial>0.28</AncientBox_ComponentIndustrial>
						<AncientBox_ComponentSpacer>0.25</AncientBox_ComponentSpacer>

						<!-- loot crates -->
						<Rimgate_SupplyCrateGreen>0.25</Rimgate_SupplyCrateGreen>
						<Rimgate_SupplyCrateYellow>0.25</Rimgate_SupplyCrateYellow>
						<Rimgate_SupplyCrateOrange>0.25</Rimgate_SupplyCrateOrange>

						<!-- rare -->
						<Rimgate_SupplyCrate>0.20</Rimgate_SupplyCrate>
						<Rimgate_SupplyCrateRed>0.20</Rimgate_SupplyCrateRed>
					</things>
					<weight>1</weight>
					<indoorRuin>true</indoorRuin>
					<coveredCellsPer10Cells>0.5~2.5</coveredCellsPer10Cells>
					<clusterRectRadius>3~6</clusterRectRadius>
				</li>

				<!-- Fallback: allow outdoor scatter if no valid indoor spot -->
				<li>
					<things>
						<AncientSmallCrate>0.83</AncientSmallCrate>
						<AncientMetalCrate>0.73</AncientMetalCrate>
						<AncientMilitaryCrate>0.40</AncientMilitaryCrate>
						<AncientAmmoStack>0.30</AncientAmmoStack>

						<AncientBox_ComponentIndustrial>0.28</AncientBox_ComponentIndustrial>
						<AncientBox_ComponentSpacer>0.22</AncientBox_ComponentSpacer>

						<Rimgate_SupplyCrateGreen>0.22</Rimgate_SupplyCrateGreen>
						<Rimgate_SupplyCrateYellow>0.22</Rimgate_SupplyCrateYellow>
						<Rimgate_SupplyCrateOrange>0.22</Rimgate_SupplyCrateOrange>

						<Rimgate_SupplyCrate>0.15</Rimgate_SupplyCrate>
						<Rimgate_SupplyCrateRed>0.15</Rimgate_SupplyCrateRed>
					</things>
					<weight>0.35</weight> <!-- lower so indoor is preferred -->
					<indoorRuin>false</indoorRuin>
					<coveredCellsPer10Cells>1.5~2.5</coveredCellsPer10Cells>
					<clusterRectRadius>3~8</clusterRectRadius>
				</li>
			</groups>
		</genStep>
	</GenStepDef>

</Defs>