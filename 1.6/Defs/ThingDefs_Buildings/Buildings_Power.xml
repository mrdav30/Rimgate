<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <!-- =============== Naquadria Generator ======== -->

  <ThingDef ParentName="BuildingBase">
    <defName>Rimgate_NaquadriaFiredGenerator</defName>
    <label>Naquadria generator</label>
    <description>This compact reactor burns Naquadria like it’s going out of style—because it probably is. Delivers massive power output and only occasionally destabilizes spacetime. Handle with oven mitts and regret.</description>
    <thingClass>Building</thingClass>
    <size>(1,2)</size>
    <graphicData>
      <texPath>Things/Building/Power/NaquadriaGenerator/RGNaquadriaFiredGenerator</texPath>
      <graphicClass>Graphic_Multi</graphicClass>
      <drawSize>(2,2)</drawSize>
    </graphicData>
    <defaultPlacingRot>East</defaultPlacingRot>
    <minifiedDef>MinifiedThing</minifiedDef>
    <thingCategories>
      <li>BuildingsPower</li>
    </thingCategories>
    <uiIconPath>Things/Building/Power/NaquadriaGenerator/RGNaquadriaFiredGenerator</uiIconPath>
    <altitudeLayer>Building</altitudeLayer>
    <passability>PassThroughOnly</passability>
    <pathCost>150</pathCost>
    <blockWind>true</blockWind>
    <fillPercent>1.0</fillPercent>
    <castEdgeShadows>false</castEdgeShadows>
    <statBases>
      <MaxHitPoints>350</MaxHitPoints>
      <WorkToBuild>3000</WorkToBuild>
      <Flammability>1.0</Flammability>
      <Mass>30</Mass>
      <Beauty>-25</Beauty>
    </statBases>
    <tickerType>Normal</tickerType>
    <canOverlapZones>false</canOverlapZones>
    <costList>
      <Steel>125</Steel>
      <Rimgate_Naquadah>50</Rimgate_Naquadah>
      <ComponentIndustrial>5</ComponentIndustrial>
      <ComponentSpacer>3</ComponentSpacer>
    </costList>
    <comps>
      <li Class="CompProperties_Power">
        <compClass>CompPowerPlant</compClass>
        <basePowerConsumption>-6500</basePowerConsumption>
        <transmitsPower>true</transmitsPower>
        <shortCircuitInRain>false</shortCircuitInRain>
      </li>
      <li Class="CompProperties_Flickable" />
      <li Class="CompProperties_Refuelable">
        <fuelConsumptionRate>0.75</fuelConsumptionRate>
        <fuelCapacity>25.0</fuelCapacity>
        <fuelFilter>
          <thingDefs>
            <li>Rimgate_Naquadria</li>
          </thingDefs>
        </fuelFilter>
      </li>
      <li Class="CompProperties_Glower">
        <glowRadius>4</glowRadius>
        <glowColor>(33,85,255,0)</glowColor>
      </li>
      <li Class="CompProperties_HeatPusher">
        <compClass>CompHeatPusherPowered</compClass>
        <heatPerSecond>6</heatPerSecond>
      </li>
      <li Class="CompProperties_Breakdownable" />
      <li Class="CompProperties_Explosive">
        <wickTicks>240</wickTicks>
        <explosiveRadius>7.9</explosiveRadius>
        <explosiveDamageType>Bomb</explosiveDamageType>
        <explodeOnKilled>true</explodeOnKilled>
        <startWickHitPointsPercent>0.99</startWickHitPointsPercent>
        <chanceNeverExplodeFromDamage>0.5</chanceNeverExplodeFromDamage>
      </li>
    </comps>
    <terrainAffordanceNeeded>Medium</terrainAffordanceNeeded>
    <designationCategory>Power</designationCategory>
    <designationHotKey>Misc3</designationHotKey>
    <constructEffect>ConstructMetal</constructEffect>
    <researchPrerequisites>
      <li>Rimgate_NaquadriaFiredGenerator</li>
    </researchPrerequisites>
    <constructionSkillPrerequisite>4</constructionSkillPrerequisite>
  </ThingDef>

  <!-- =============== Industrial Naquadria Generator ======== -->

  <ThingDef ParentName="BuildingBase">
    <defName>Rimgate_IndustrialNaquadriaFiredGenerator</defName>
    <label>Industrial Naquadria generator</label>
    <description>A massive, hardened power core designed to keep Tau’ri Stargate facilities online no matter what comes through. Fueled by volatile naquadria, it produces enough output to light a small city—or vaporize one if mishandled. Redundant shielding keeps colonists mostly safe, though the hum in the walls might shorten lifespans by a decade or two. But hey—at least the lights stay on.</description>
    <graphicData>
      <texPath>Things/Building/Power/NaquadriaGenerator/RGIndustrialNaquadriaFiredGenerator</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(5,2.5)</drawSize>
    </graphicData>
    <rotatable>false</rotatable>
    <size>(5,2)</size>
    <statBases>
      <MaxHitPoints>5000</MaxHitPoints>
      <Flammability>0</Flammability>
    </statBases>
    <building>
      <claimable>false</claimable>
      <isInert>true</isInert>
      <alwaysDeconstructible>true</alwaysDeconstructible>
      <canLandGravshipOn>true</canLandGravshipOn>
    </building>
    <noRightClickDraftAttack>true</noRightClickDraftAttack>
    <passability>Impassable</passability>
    <canOverlapZones>false</canOverlapZones>
    <altitudeLayer>Building</altitudeLayer>
    <tickerType>Normal</tickerType>
    <comps>
      <li Class="CompProperties_Power">
        <compClass>CompPowerTrader</compClass>
        <basePowerConsumption>-13000</basePowerConsumption>
        <shortCircuitInRain>true</shortCircuitInRain>
      </li>
      <li Class="CompProperties_Flickable" />
      <li Class="CompProperties_HeatPusher">
        <compClass>CompHeatPusherPowered</compClass>
        <heatPerSecond>6</heatPerSecond>
      </li>
      <li Class="CompProperties_Explosive">
        <wickTicks>680</wickTicks>
        <explosiveRadius>12.9</explosiveRadius>
        <explosiveDamageType>Bomb</explosiveDamageType>
        <explodeOnKilled>true</explodeOnKilled>
        <startWickHitPointsPercent>0.45</startWickHitPointsPercent>
        <chanceNeverExplodeFromDamage>0.5</chanceNeverExplodeFromDamage>
      </li>
      <li Class="CompProperties_Glower">
        <glowRadius>1</glowRadius>
        <glowColor>(217,112,33,0)</glowColor>
      </li>
    </comps>
    <pathCost>150</pathCost>
  </ThingDef>

  <!-- =============== Wraith Generator ======== -->

  <ThingDef ParentName="BuildingBase">
    <defName>Rimgate_WraithGenerator</defName>
    <label>meat fired generator</label>
    <label>biomass generator</label>
    <description>A living power plant of Wraith design, its chambers packed with seething, organic matter that slowly digests biomass into raw energy. Though grotesque, it is brutally efficient—turning anything that once lived into fuel. The soft glow and faint chitter of its innards remind you this is less a machine than a creature chained to a wall.</description>
    <thingClass>Building</thingClass>
    <size>(1,2)</size>
    <graphicData>
      <texPath>Things/Building/Power/BiomassGenerator/RGBiomassGenerator</texPath>
      <graphicClass>Graphic_Multi</graphicClass>
      <drawSize>(3,3)</drawSize>
      <shadowData>
        <volume>(1.93,1,1.69)</volume>
        <offset>(-0.03,0,-0.1)</offset>
      </shadowData>
    </graphicData>
    <minifiedDef>MinifiedThing</minifiedDef>
    <thingCategories>
      <li>BuildingsPower</li>
    </thingCategories>
    <altitudeLayer>Building</altitudeLayer>
    <passability>PassThroughOnly</passability>
    <pathCost>150</pathCost>
    <blockWind>true</blockWind>
    <fillPercent>1.0</fillPercent>
    <castEdgeShadows>false</castEdgeShadows>
    <statBases>
      <MaxHitPoints>350</MaxHitPoints>
      <WorkToBuild>3000</WorkToBuild>
      <Flammability>1.0</Flammability>
      <Mass>30</Mass>
      <Beauty>-25</Beauty>
    </statBases>
    <tickerType>Normal</tickerType>
    <canOverlapZones>false</canOverlapZones>
    <costList>
      <Steel>60</Steel>
      <Rimgate_Biomass>70</Rimgate_Biomass>
      <ComponentIndustrial>2</ComponentIndustrial>
    </costList>
    <comps>
      <li Class="CompProperties_Power">
        <compClass>CompPowerPlant</compClass>
        <basePowerConsumption>-3600</basePowerConsumption>
        <transmitsPower>true</transmitsPower>
        <shortCircuitInRain>false</shortCircuitInRain>
      </li>
      <li Class="CompProperties_Flickable" />
      <li Class="CompProperties_Refuelable">
        <fuelConsumptionRate>0.75</fuelConsumptionRate>
        <fuelCapacity>25.0</fuelCapacity>
        <fuelFilter>
          <thingDefs>
            <li>Rimgate_Biomass</li>
          </thingDefs>
        </fuelFilter>
      </li>
      <li Class="CompProperties_Glower">
        <glowRadius>4</glowRadius>
        <glowColor>(33,202,255,0)</glowColor>
      </li>
      <li Class="CompProperties_HeatPusher">
        <compClass>CompHeatPusherPowered</compClass>
        <heatPerSecond>6</heatPerSecond>
      </li>
      <li Class="CompProperties_Breakdownable" />
    </comps>
    <terrainAffordanceNeeded>Medium</terrainAffordanceNeeded>
    <designationCategory>Power</designationCategory>
    <designationHotKey>Misc3</designationHotKey>
    <constructEffect>ConstructMetal</constructEffect>
    <researchPrerequisites>
      <li>Rimgate_WraithGenerator</li>
    </researchPrerequisites>
    <constructionSkillPrerequisite>4</constructionSkillPrerequisite>
  </ThingDef>

  <!-- =============== ZPM =============== -->

  <ThingDef ParentName="BuildingBase">
    <defName>Rimgate_ZPM</defName>
    <label>zero point module</label>
    <description>A self-contained miracle of Ancient technology, the ZPM draws energy from a subspace vacuum—basically finite power in a shiny cylinder. Makes other batteries look like AA cells from a cereal box.\n\nUnfortunately, such a thing is impossible to hide. Once installed in a power network, its archotech-grade signature will leak into the sky, luring factions across the Rim to your colony’s doorstep. Power eternal… and trouble unending.\n\n"It's kind of like a miniature universe in a bottle."</description>
    <thingClass>Rimgate.Building_ZPM</thingClass>
    <category>Building</category>
    <soundImpactDefault>BulletImpact_Metal</soundImpactDefault>
    <selectable>true</selectable>
    <drawerType>MapMeshAndRealTime</drawerType>
    <terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
    <repairEffect>Repair</repairEffect>
    <size>(1,1)</size>
    <graphicData>
      <texPath>Things/Building/Power/ZPM/RGZPM</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(1,2)</drawSize>
      <drawOffset>(0,0,0.40)</drawOffset>
      <shadowData>
        <volume>(0.27,0.25,0.27)</volume>
      </shadowData>
      <addTopAltitudeBias>true</addTopAltitudeBias>
    </graphicData>
    <techLevel>Archotech</techLevel>
    <stackLimit>1</stackLimit>
    <minifiedDef>MinifiedThing</minifiedDef>
    <thingCategories>
      <li>Artifacts</li>
    </thingCategories>
    <altitudeLayer>Building</altitudeLayer>
    <castEdgeShadows>true</castEdgeShadows>
    <fillPercent>1</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>150</pathCost>
    <tickerType>Rare</tickerType>
    <statBases>
      <WorkToMake>30000</WorkToMake>
      <MaxHitPoints>1000000</MaxHitPoints>
      <MarketValue>25000</MarketValue>
      <Flammability>0.0</Flammability>
      <Mass>20</Mass>
    </statBases>
    <building>
      <neverBuildable>true</neverBuildable>
      <canLandGravshipOn>true</canLandGravshipOn>
    </building>
    <tradeability>Buyable</tradeability>
    <tradeNeverStack>true</tradeNeverStack>
    <leaveResourcesWhenKilled>false</leaveResourcesWhenKilled>
    <resourcesFractionWhenDeconstructed>0</resourcesFractionWhenDeconstructed>
    <comps>
      <li Class="CompProperties_Battery">
        <storedEnergyMax>48000</storedEnergyMax>
        <efficiency>1</efficiency>
        <transmitsPower>true</transmitsPower>
        <shortCircuitInRain>false</shortCircuitInRain>
      </li>
      <li Class="CompProperties_Flickable" />
      <li Class="CompProperties_AffectedByFacilities">
        <linkableFacilities>
          <li>Rimgate_SubspaceShroudEmitter</li>
          <li>Rimgate_SubspacePhaseDiverter</li>
        </linkableFacilities>
      </li>
      <li Class="CompProperties_CompAnalyzableUnlockResearch">
        <analysisID>1000600</analysisID>

        <!-- Analyzable -->

        <canStudyInPlace>true</canStudyInPlace>
        <destroyedOnAnalyzed>false</destroyedOnAnalyzed>
        <analysisDurationHours>10</analysisDurationHours>
        <completedLetterLabel>ZPM studied: {RESEARCH} unlocked</completedLetterLabel>
        <completedLetter>By studying the ZPM, {PAWN_labelShort} has acquired the insight needed for the research project(s) {RESEARCH}.\n\nYour researchers can now use research benches to begin researching how to actually use the technology.</completedLetter>
        <completedLetterDef>PositiveEvent</completedLetterDef>

        <!-- Interactable -->

        <activateTexPath>UI/Icons/Study</activateTexPath>

        <activateLabelString>Analyze...</activateLabelString>
        <activateDescString>Analyze the ZPM.</activateDescString>
        <jobString>Analyzing ZPM</jobString>
        <guiLabelString>Choose who should analyze this</guiLabelString>
        <inspectString>Can be analyzed by a colonist.</inspectString>

        <targetingParameters>
          <canTargetBuildings>false</canTargetBuildings>
          <canTargetAnimals>false</canTargetAnimals>
          <canTargetMechs>false</canTargetMechs>
          <onlyTargetControlledPawns>true</onlyTargetControlledPawns>
        </targetingParameters>
      </li>
    </comps>
    <placeWorkers>
      <li>Rimgate.PlaceWorker_ZpmClusterHint</li>
    </placeWorkers>
    <drawPlaceWorkersWhileSelected>true</drawPlaceWorkersWhileSelected>
    <hasInteractionCell>False</hasInteractionCell>
  </ThingDef>

  <!-- ======================= ZPM signal shield ======================= -->

  <ThingDef ParentName="BuildingBase">
    <defName>Rimgate_SubspaceShroudEmitter</defName>
    <label>subspace shroud emitter</label>
    <description>A compact field generator that floods nearby space-time with carrier noise, masking a ZPM’s archotech power signature. While powered, linked ZPMs won’t broadcast a raid-magnet of a beacon. Tau’ri engineers call it “a blanket for your sun-in-a-can.”\n\nMust be linked to a ZPM to function. Once synchronized, it masks all ZPMs on this map.</description>
    <size>(1,1)</size>
    <rotatable>false</rotatable>
    <category>Building</category>
    <graphicData>
      <texPath>Things/Building/Power/RGSubspaceShroud</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(1.1,1.1)</drawSize>
    </graphicData>
    <altitudeLayer>Building</altitudeLayer>
    <selectable>true</selectable>
    <tickerType>Normal</tickerType>
    <stackLimit>1</stackLimit>
    <passability>PassThroughOnly</passability>
    <pathCost>150</pathCost>
    <thingCategories>
      <li>BuildingsPower</li>
    </thingCategories>
    <minifiedDef>MinifiedThing</minifiedDef>
    <terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
    <statBases>
      <MaxHitPoints>160</MaxHitPoints>
      <WorkToBuild>1800</WorkToBuild>
      <Flammability>0</Flammability>
      <Mass>8</Mass>
      <Beauty>-2</Beauty>
    </statBases>
    <costList>
      <Steel>40</Steel>
      <ComponentIndustrial>2</ComponentIndustrial>
      <ComponentSpacer>1</ComponentSpacer>
      <Rimgate_Naquadah>5</Rimgate_Naquadah>
    </costList>
    <placeWorkers>
      <li>PlaceWorker_ShowFacilitiesConnections</li>
    </placeWorkers>
    <designationCategory>Power</designationCategory>
    <researchPrerequisites>
      <li>Rimgate_SubspaceMasking</li>
    </researchPrerequisites>
    <comps>
      <li Class="CompProperties_Flickable" />
      <li Class="CompProperties_Power">
        <compClass>CompPowerTrader</compClass>
        <basePowerConsumption>200</basePowerConsumption>
        <shortCircuitInRain>false</shortCircuitInRain>
      </li>
      <li Class="CompProperties_Glower">
        <glowRadius>2</glowRadius>
        <glowColor>(120,200,255,0)</glowColor>
      </li>
      <li Class="CompProperties_Facility">
        <maxSimultaneous>99</maxSimultaneous>
        <mustBePlacedAdjacent>true</mustBePlacedAdjacent>
        <showMaxSimultaneous>false</showMaxSimultaneous>
      </li>
      <!-- toggles ZPM-raid suppression on this map while powered -->
      <li>
        <compClass>Rimgate.Comp_ZpmSignalScrambler</compClass>
      </li>
    </comps>
  </ThingDef>

  <!-- Subspace Phase Diverter-->

  <ThingDef ParentName="BuildingBase">
    <defName>Rimgate_SubspacePhaseDiverter</defName>
    <label>subspace phase diverter</label>
    <description>An advanced rig that can couple your ZPMs to adjacent subspace pockets, letting any ZPM to slowly replenish its reserve. It doesn’t create energy; it changes where you’re siphoning it from.</description>
    <size>(2,2)</size>
    <rotatable>false</rotatable>
    <graphicData>
      <texPath>Things/Building/Power/RGSubspacePhaseDiverter</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(2,2)</drawSize>
    </graphicData>
    <altitudeLayer>Building</altitudeLayer>
    <selectable>true</selectable>
    <tickerType>Rare</tickerType>
    <stackLimit>1</stackLimit>
    <thingCategories>
      <li>BuildingsPower</li>
    </thingCategories>
    <minifiedDef>MinifiedThing</minifiedDef>
    <passability>PassThroughOnly</passability>
    <pathCost>150</pathCost>
    <statBases>
      <MaxHitPoints>200</MaxHitPoints>
      <WorkToBuild>4200</WorkToBuild>
      <Flammability>0.0</Flammability>
      <Beauty>-4</Beauty>
      <Mass>40</Mass>
    </statBases>
    <costList>
      <Steel>120</Steel>
      <Plasteel>60</Plasteel>
      <ComponentIndustrial>4</ComponentIndustrial>
      <ComponentSpacer>4</ComponentSpacer>
    </costList>
    <designationCategory>Power</designationCategory>
    <researchPrerequisites>
      <li>Rimgate_ParallelSubspaceCoupling</li>
    </researchPrerequisites>
    <comps>
      <li Class="CompProperties_Power">
        <compClass>CompPowerTrader</compClass>
        <basePowerConsumption>200</basePowerConsumption>
        <shortCircuitInRain>false</shortCircuitInRain>
      </li>
      <li Class="CompProperties_Flickable" />
      <li Class="CompProperties_Facility">
        <maxSimultaneous>6</maxSimultaneous>
        <maxDistance>4</maxDistance>
        <minDistance>1</minDistance>
        <requiresLOS>true</requiresLOS>
        <showMaxSimultaneous>false</showMaxSimultaneous>
      </li>
    </comps>
    <placeWorkers>
      <li>PlaceWorker_ShowFacilitiesConnections</li>
    </placeWorkers>
  </ThingDef>

</Defs>