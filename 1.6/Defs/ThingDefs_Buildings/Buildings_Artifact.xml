<?xml version="1.0" encoding="UTF-8"?>
<Defs>

    <!-- =============== Stargate Base =============== -->

    <ThingDef Name="Rimgate_StargateBase" ParentName="BuildingBase" Abstract="True">
        <thingClass>Rimgate.Building_Stargate</thingClass>
        <rotatable>false</rotatable>
        <minifiedDef>MinifiedThing</minifiedDef>
        <stealable>false</stealable>
        <constructEffect>ConstructMetal</constructEffect>
        <altitudeLayer>BuildingOnTop</altitudeLayer>
        <fillPercent>0.20</fillPercent>
        <canOverlapZones>true</canOverlapZones>
        <leaveResourcesWhenKilled>true</leaveResourcesWhenKilled>
        <passability>PassThroughOnly</passability>
        <castEdgeShadows>false</castEdgeShadows>
        <pathCost>3</pathCost>
        <thingCategories>
            <li>Artifacts</li>
        </thingCategories>
        <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
        <tickerType>Normal</tickerType>
        <drawerType>RealtimeOnly</drawerType>
        <preventDroppingThingsOn>true</preventDroppingThingsOn>
        <hasInteractionCell>True</hasInteractionCell>
        <interactionCellOffset>(0,0,0)</interactionCellOffset>
        <building>
            <ai_neverTrashThis>true</ai_neverTrashThis>
        </building>
        <placeWorkers>
            <li>PlaceWorker_PreventInteractionSpotOverlap</li>
            <li>Rimgate.PlaceWorker_Stargate</li>
        </placeWorkers>
        <drawPlaceWorkersWhileSelected>true</drawPlaceWorkersWhileSelected>
        <comps>
            <li Class="CompProperties_Glower">
                <glowRadius>0</glowRadius> <!-- This is changed in C# -->
                <glowColor>(115,171,224,0)</glowColor>
            </li>
            <li Class="CompProperties_Transporter">
                <max1PerGroup>true</max1PerGroup>
                <massCapacity>999999</massCapacity>
            </li>
        </comps>
    </ThingDef>

    <!-- ======= Stargate Ancient ======= -->

    <ThingDef ParentName="Rimgate_StargateBase">
        <defName>Rimgate_Stargate</defName>
        <label>Dwarfgate</label>
        <description>An ancient alien construct capable of instantaneous transit—but unlike the legendary Stargates of myth, these “Dwarfgates” are smaller, dimmer cousins. Their wormhole lattice is sealed into a closed planetary network; attempts to dial off-world fizzle as if an unseen hand blocks the path.
            \n\nRumors whisper that the Archotechs themselves tampered with them, corralling their use to a single world for inscrutable ends. Stranger still, scattered reports claim there are hundreds of such gates buried across the Rim—drawing fortune-seekers, warlords, and scholars alike to uncover the reason why they were left here… and what they are meant to protect.
            \n\n"By the time you get to the other side, you're frozen stiff. Like you'd just been through a blizzard... naked."</description>
        <size>(5,1)</size>
        <graphicData>
            <texPath>Things/Building/Artifact/RGStargateAncient</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(5.3,5.3)</drawSize>
            <drawOffset>(0,0,1.2)</drawOffset>
            <addTopAltitudeBias>true</addTopAltitudeBias>
        </graphicData>
        <techLevel>Archotech</techLevel>
        <killedLeavings>
            <Steel>120</Steel>
            <ComponentIndustrial>8</ComponentIndustrial>
            <ComponentSpacer>1</ComponentSpacer>
            <Rimgate_Naquadria>5</Rimgate_Naquadria>
        </killedLeavings>
        <statBases>
            <MarketValue>30000</MarketValue>
            <MaxHitPoints>6000</MaxHitPoints>
            <Flammability>0</Flammability>
            <Mass>290</Mass>
            <MeditationFocusStrength>0.24</MeditationFocusStrength>
        </statBases>
        <comps>
            <li Class="Rimgate.CompProperties_StargateControl">
                <puddleGraphicData>
                    <texPath>FX/RGEventHorizon</texPath>
                    <graphicClass>Graphic_Single</graphicClass>
                    <shaderType>TransparentPostLight</shaderType>
                    <drawSize>(5.3,5.3)</drawSize>
                </puddleGraphicData>
                <irisGraphicData>
                    <texPath>Things/Building/Misc/RGIris</texPath>
                    <graphicClass>Graphic_Single</graphicClass>
                    <shaderType>Mote</shaderType>
                    <drawSize>(5.3,5.3)</drawSize>
                </irisGraphicData>
                <activeGraphicData>
                    <texPath>Things/Building/Artifact/RGStargateAncient_Active</texPath>
                    <graphicClass>Graphic_Single</graphicClass>
                    <drawSize>(5.3,5.3)</drawSize>
                    <drawOffset>(0,0,1.2)</drawOffset>
                    <addTopAltitudeBias>true</addTopAltitudeBias>
                </activeGraphicData>
                <irisPowerConsumption>500</irisPowerConsumption>
            </li>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <shortCircuitInRain>false</shortCircuitInRain>
                <basePowerConsumption>0</basePowerConsumption>
                <showPowerNeededIfOff>false</showPowerNeededIfOff>
            </li>
            <li Class="CompProperties_AffectedByFacilities">
                <linkableFacilities>
                    <li>Rimgate_DialHomeDevice</li>
                    <li>Rimgate_TauriDialHomeDevice</li>
                </linkableFacilities>
            </li>
            <li Class="CompProperties_MeditationFocus">
                <statDef>MeditationFocusStrength</statDef>
                <focusTypes>
                    <li>Natural</li>
                    <li>Void</li>
                </focusTypes>
                <offsets>
                    <li Class="FocusStrengthOffset_BuildingDefsLit">
                        <defs>
                            <li>Rimgate_DialHomeDevice</li>
                        </defs>
                        <offsetPerBuilding>0.05</offsetPerBuilding>
                        <radius>9.9</radius>
                        <maxBuildings>1</maxBuildings>
                        <explanationKey>MeditationFocusPerBuilding</explanationKey>
                        <explanationKeyAbstract>MeditationFocusPerBuildingAbstract</explanationKeyAbstract>
                        <drawRingRadius>false</drawRingRadius>
                    </li>
                </offsets>
            </li>
        </comps>
    </ThingDef>

    <!-- =============== DHD =============== -->

    <ThingDef ParentName="BuildingBase">
        <defName>Rimgate_DialHomeDevice</defName>
        <thingClass>Rimgate.Building_DHD</thingClass>
        <label>Dial home device</label>
        <description>An ancient alien control console designed to interface with a Stargate. Punch in the right sequence, and the universe becomes your backyard—assuming you don’t misdial into a sun.\n\n"Kind of a ring thing, comes with a dialer, you hit the symbols, it spins around and lights come on, it kind of flushes sideways..."</description>
        <graphicData>
            <texPath>Things/Building/Artifact/RGDHD</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(2,2)</drawSize>
            <addTopAltitudeBias>true</addTopAltitudeBias>
        </graphicData>
        <size>(1,1)</size>
        <uiIconScale>0.5</uiIconScale>
        <rotatable>false</rotatable>
        <minifiedDef>MinifiedThing</minifiedDef>
        <minifiedDrawScale>0.5</minifiedDrawScale>
        <stealable>true</stealable>
        <passability>Impassable</passability>
        <constructEffect>ConstructMetal</constructEffect>
        <fillPercent>0.40</fillPercent>
        <canOverlapZones>true</canOverlapZones>
        <leaveResourcesWhenKilled>true</leaveResourcesWhenKilled>
        <altitudeLayer>Building</altitudeLayer>
        <preventDroppingThingsOn>true</preventDroppingThingsOn>
        <thingCategories>
            <li>Artifacts</li>
        </thingCategories>
        <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
        <tickerType>Never</tickerType>
        <hasInteractionCell>True</hasInteractionCell>
        <interactionCellOffset>(0,0,-1)</interactionCellOffset>
        <building>
            <ai_neverTrashThis>true</ai_neverTrashThis>
        </building>
        <placeWorkers>
            <li>PlaceWorker_ShowFacilitiesConnections</li>
            <li>PlaceWorker_PreventInteractionSpotOverlap</li>
        </placeWorkers>
        <comps>
            <li Class="CompProperties_Facility">
                <requiresLOS>false</requiresLOS>
            </li>
            <li Class="Rimgate.CompProperties_DHDControl">
                <activeGraphicData>
                    <texPath>Things/Building/Artifact/RGDHD_Active</texPath>
                    <graphicClass>Graphic_Single</graphicClass>
                    <drawSize>(2,2)</drawSize>
                    <addTopAltitudeBias>true</addTopAltitudeBias>
                </activeGraphicData>
            </li>
        </comps>
        <leaveResourcesWhenKilled>true</leaveResourcesWhenKilled>
        <killedLeavings>
            <Rimgate_ZPM>1</Rimgate_ZPM>
        </killedLeavings>
        <killedLeavingsChance>0.005</killedLeavingsChance>
        <statBases>
            <MaxHitPoints>6000</MaxHitPoints>
            <Flammability>0</Flammability>
            <Mass>60</Mass>
        </statBases>
        <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
    </ThingDef>

    <ThingDef ParentName="BuildingBase">
        <defName>Rimgate_TauriDialHomeDevice</defName>
        <thingClass>Building</thingClass>
        <label>Dial home device</label>
        <description>A field-grade Tau'ri replacement for the original alien DHD—built with enough spare parts, ingenuity, and juice to re-establish interstellar dialing.\nDoesn't spin, doesn’t glow, but it gets the job done. Also bolted down better than the last one.</description>
        <rotatable>false</rotatable>
        <size>(1,1)</size>
        <graphicData>
            <texPath>Things/Building/Misc/RGTauriDHD</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(2,2)</drawSize>
            <addTopAltitudeBias>true</addTopAltitudeBias>
        </graphicData>
        <minifiedDef>MinifiedThing</minifiedDef>
        <stealable>false</stealable>
        <passability>PassThroughOnly</passability>
        <constructEffect>ConstructMetal</constructEffect>
        <uiIconScale>0.5</uiIconScale>
        <fillPercent>0.40</fillPercent>
        <canOverlapZones>true</canOverlapZones>
        <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
        <tickerType>Never</tickerType>
        <hasInteractionCell>True</hasInteractionCell>
        <interactionCellOffset>(0,0,-1)</interactionCellOffset>
        <altitudeLayer>Building</altitudeLayer>
        <preventDroppingThingsOn>true</preventDroppingThingsOn>
        <thingCategories>
            <li>BuildingsMisc</li>
        </thingCategories>
        <building>
            <ai_neverTrashThis>true</ai_neverTrashThis>
        </building>
        <constructionSkillPrerequisite>6</constructionSkillPrerequisite>
        <leaveResourcesWhenKilled>true</leaveResourcesWhenKilled>
        <designationCategory>Misc</designationCategory>
        <costList>
            <Steel>300</Steel>
            <Gold>100</Gold>
            <Rimgate_Naquadah>50</Rimgate_Naquadah>
            <ComponentIndustrial>60</ComponentIndustrial>
            <ComponentSpacer>25</ComponentSpacer>
        </costList>
        <placeWorkers>
            <li>PlaceWorker_ShowFacilitiesConnections</li>
            <li>PlaceWorker_PreventInteractionSpotOverlap</li>
        </placeWorkers>
        <comps>
            <li Class="CompProperties_Facility">
                <requiresLOS>false</requiresLOS>
            </li>
            <li Class="CompProperties_Flickable" />
            <li Class="Rimgate.CompProperties_DHDControl">
                <requiresPower>true</requiresPower>
            </li>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <shortCircuitInRain>false</shortCircuitInRain>
                <basePowerConsumption>800</basePowerConsumption>
            </li>
        </comps>
        <statBases>
            <MaxHitPoints>3000</MaxHitPoints>
            <Flammability>0.4</Flammability>
            <WorkToBuild>14000</WorkToBuild>
            <Mass>30</Mass>
        </statBases>
        <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
        <researchPrerequisites>
            <li>Rimgate_StargateReplacementDHDResearch</li>
        </researchPrerequisites>
    </ThingDef>

    <!-- =============== ARCHOTECH IDOL OF RESONANCE =============== -->

    <ThingDef ParentName="BuildingBase">
        <defName>Rimgate_ArchotechIdolOfResonance</defName>
        <label>archotech idol of resonance</label>
        <description>A compact ancient artifact that hums in subspace harmonics. Nearby minds settle into an effortless focus—mood stabilizes, steps feel lighter, and even the stubborn find resolve. But listen too long and the static whispers back.</description>
        <category>Building</category>
        <thingClass>Building</thingClass>
        <selectable>true</selectable>
        <drawPlaceWorkersWhileSelected>false</drawPlaceWorkersWhileSelected>
        <altitudeLayer>Building</altitudeLayer>
        <rotatable>false</rotatable>
        <size>(1,1)</size>
        <graphicData>
            <texPath>Things/Building/Artifact/RGArchotechIdolOfResonance</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(2,2)</drawSize>
        </graphicData>
        <thingCategories>
            <li>Artifacts</li>
        </thingCategories>
        <soundImpactDefault>BulletImpact_Metal</soundImpactDefault>
        <techLevel>Archotech</techLevel>
        <minifiedDef>MinifiedThing</minifiedDef>
        <tradeability>None</tradeability>
        <tradeTags Inherit="False" />
        <tradeNeverStack>true</tradeNeverStack>
        <tickerType>Rare</tickerType>
        <pathCost>0</pathCost>
        <neverMultiSelect>true</neverMultiSelect>
        <useHitPoints>false</useHitPoints>
        <leaveResourcesWhenKilled>false</leaveResourcesWhenKilled>
        <statBases>
            <Beauty>25</Beauty>
            <Flammability>0</Flammability>
            <MarketValue>8000</MarketValue>
            <Mass>8</Mass>
        </statBases>
        <building>
            <joyKind>Meditative</joyKind>
            <watchBuildingStandDistanceRange>1~5</watchBuildingStandDistanceRange>
            <watchBuildingStandRectWidth>1</watchBuildingStandRectWidth>
            <watchBuildingInSameRoom>true</watchBuildingInSameRoom>
            <artificialForMeditationPurposes>false</artificialForMeditationPurposes>
            <deconstructible>false</deconstructible>
            <claimable>true</claimable>
        </building>
        <comps>
            <li Class="CompProperties_Glower">
                <glowRadius>3</glowRadius>
                <glowColor>(120, 200, 255, 0)</glowColor>
            </li>
            <li Class="Rimgate.CompProperties_ResonanceIdol">
                <!-- gameplay tuning -->
                <radius>16</radius>
                <refreshTicks>1200</refreshTicks> <!-- ~20s; re-applied by comp to keep buff alive -->
                <negativeThoughtMtbDays>12</negativeThoughtMtbDays>

                <!-- hediffs applied (hidden) -->
                <fieldBuffHediff>Rimgate_ResonanceFieldBuff</fieldBuffHediff>
                <hostBoostHediff>Rimgate_ResonanceHostBoost</hostBoostHediff>

                <!-- thoughts -->
                <thoughtNear>Rimgate_ResonanceCalm</thoughtNear>
                <thoughtNearForWraith>Rimgate_ResonanceWraithSatiation</thoughtNearForWraith>
                <thoughtNegative>Rimgate_ResonanceStaticVoices</thoughtNegative>
            </li>
        </comps>
        <placeWorkers>
            <li>Rimgate.PlaceWorker_ResonanceIdol</li>
            <li>Rimgate.PlaceWorker_Stargate</li>
        </placeWorkers>
        <drawPlaceWorkersWhileSelected>true</drawPlaceWorkersWhileSelected>
    </ThingDef>

</Defs>