<?xml version="1.0" encoding="UTF-8"?>
<Defs>

    <!-- =============== Clones =============== -->

    <HediffDef>
        <defName>Hediff_ClonedTracker</defName>
        <label>clone tracker (hidden)</label>
        <description>This hediff stores tracking data to determine how many times this pawn has been cloned.</description>
        <hediffClass>Rimgate.Hediff_ClonedTracker</hediffClass>
        <defaultLabelColor>(0.65, 0.3, 0.9)</defaultLabelColor>
        <isBad>false</isBad>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef>
        <defName>Rimgate_Clone</defName>
        <label>clone (hidden)</label>
        <description>Another happy accident of mad science. Don't worry — they only think they’re the original.</description>
        <hediffClass>Rimgate.Hediff_Clone</hediffClass>
        <defaultLabelColor>(0.65, 0.3, 0.9)</defaultLabelColor>
        <isBad>false</isBad>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef>
        <defName>Rimgate_CloneRandom</defName>
        <label>clone (hidden)</label>
        <description>Another happy accident of mad science. Don't worry — they only think they’re the original.</description>
        <hediffClass>Rimgate.Hediff_Clone</hediffClass>
        <defaultLabelColor>(0.65, 0.3, 0.9)</defaultLabelColor>
        <isBad>false</isBad>
        <comps>
            <li>
                <compClass>Rimgate.HediffComp_RandomCloneGeneration</compClass>
            </li>
        </comps>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef ParentName="DiseaseBase">
        <defName>Rimgate_SystemShock</defName>
        <label>clone activation shock</label>
        <labelNoun>activation shock</labelNoun>
        <description>The patient's nervous system is acclimating to activation and overwhelming sensory inputs, limiting coherent cognition.</description>
        <comps>
            <li Class="HediffCompProperties_Disappears">
                <disappearsAfterTicks>
                    <min>20000</min>
                    <max>35000</max>
                </disappearsAfterTicks>
            </li>
        </comps>
        <stages>
            <li>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <setMax>0.1</setMax>
                    </li>
                </capMods>
            </li>
        </stages>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef ParentName="DiseaseBase">
        <defName>Rimgate_ClonePodSickness</defName>
        <label>clone pod sickness</label>
        <description>After-effects of using a cloning pod. The process suspends and replaces many bodily functions in order to prevent aging and death. Upon exiting, the body takes time to restart and rebalance its natural metabolic processes and purge the agents that assist with the cloning process. While this is ongoing, the patient suffers from nausea, dizziness, and a sense of fuzziness in the mind - amplifieds further from the strain of cloning preparation.</description>
        <makesSickThought>true</makesSickThought>
        <comps>
            <li Class="HediffCompProperties_Disappears">
                <disappearsAfterTicks>
                    <min>10000</min>
                    <max>40000</max>
                </disappearsAfterTicks>
            </li>
        </comps>
        <stages>
            <li>
                <vomitMtbDays>0.125</vomitMtbDays>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <postFactor>0.8</postFactor>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <postFactor>0.5</postFactor>
                    </li>
                    <li>
                        <capacity>Manipulation</capacity>
                        <postFactor>0.5</postFactor>
                    </li>
                </capMods>
            </li>
        </stages>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef ParentName="DiseaseBase">
        <defName>Rimgate_Enduring</defName>
        <label>enduring</label>
        <description>Cloned to be slightly faster, have improved vision and reflexes, and are more resilient.</description>
        <defaultLabelColor>(0.65, 0.3, 0.9)</defaultLabelColor>
        <isBad>false</isBad>
        <stages>
            <li>
                <painOffset>-0.5</painOffset>
                <statOffsets>
                    <MeleeHitChance>2</MeleeHitChance>
                    <MeleeDodgeChance>2</MeleeDodgeChance>
                    <ShootingAccuracyPawn>2</ShootingAccuracyPawn>
                    <MoveSpeed>1</MoveSpeed>
                    <InjuryHealingFactor>1.5</InjuryHealingFactor>
                </statOffsets>
            </li>
        </stages>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- =============== Mobile Container debuffs =============== -->

    <HediffDef>
        <defName>Rimgate_PushingCart</defName>
        <label>pushing a cart</label>
        <description>The strain of pushing a loaded cart reduces movement speed.</description>
        <hediffClass>Hediff</hediffClass>
        <tendable>false</tendable>
        <stages>
            <!-- light -->
            <li>
                <minSeverity>0.1</minSeverity>
                <statFactors>
                    <MoveSpeed>0.98</MoveSpeed>
                </statFactors>
            </li>
            <li>
                <minSeverity>0.5</minSeverity>
                <statFactors>
                    <MoveSpeed>0.92</MoveSpeed>
                </statFactors>
            </li>
            <!-- heavy -->
            <li>
                <minSeverity>0.8</minSeverity>
                <statFactors>
                    <MoveSpeed>0.85</MoveSpeed>
                </statFactors>
            </li>
        </stages>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- =============== ARCHOTECH IDOL OF RESONANCE =============== -->

    <!-- Hidden short-duration buffs the comp refreshes -->

    <HediffDef>
        <defName>Rimgate_ResonanceFieldBuff</defName>
        <label>resonance field</label>
        <description>The idol’s harmonic field eases the mind and steadies the hands.</description>
        <hediffClass>HediffWithComps</hediffClass>
        <isBad>false</isBad>
        <tendable>false</tendable>
        <initialSeverity>0.1</initialSeverity>
        <comps>
            <li Class="HediffCompProperties_Disappears">
                <disappearsAfterTicks>1200</disappearsAfterTicks>
                <showRemainingTime>false</showRemainingTime>
            </li>
        </comps>
        <stages>
            <li>
                <becomeVisible>false</becomeVisible> <!-- Keep it invisible to players -->
                <statOffsets>
                    <MoveSpeed>0.05</MoveSpeed>  <!-- +5% -->
                    <MentalBreakThreshold>-0.10</MentalBreakThreshold> <!-- 10% easier to avoid breaks -->
                    <PsychicSensitivity>0.05</PsychicSensitivity>
                </statOffsets>
            </li>
        </stages>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef>
        <defName>Rimgate_ResonanceHostBoost</defName>
        <label>resonance attunement</label>
        <description>The idol’s harmonic field eases the mind of your symbiote.</description>
        <hediffClass>HediffWithComps</hediffClass>
        <isBad>false</isBad>
        <tendable>false</tendable>
        <initialSeverity>0.1</initialSeverity>
        <comps>
            <li Class="HediffCompProperties_Disappears">
                <disappearsAfterTicks>1200</disappearsAfterTicks>
                <showRemainingTime>false</showRemainingTime>
            </li>
        </comps>
        <stages>
            <li>
                <becomeVisible>false</becomeVisible> <!-- Keep it invisible to players -->
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>0.10</offset> <!-- Goa'uld host synergy -->
                    </li>
                </capMods>
            </li>
        </stages>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- =============== Unrecruitable =============== -->

    <HediffDef>
        <defName>Rimgate_Unrecruitable</defName>
        <label>unwavering loyalty</label>
        <description>This pawn’s conditioning prevents defection or recruitment by any means.</description>
        <hediffClass>HediffWithComps</hediffClass>
        <isBad>false</isBad>
        <tendable>false</tendable>
        <stages>
            <li>
                <becomeVisible>false</becomeVisible> <!-- Keep it invisible to players -->
                <statOffsets>
                    <MentalBreakThreshold>-0.04</MentalBreakThreshold>
                </statOffsets>
            </li>
        </stages>
        <comps>
            <li>
                <compClass>Rimgate.HediffComp_Unrecruitable</compClass>
            </li>
        </comps>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- ==================== Cortical Dampener ==================== -->

    <HediffDef>
        <defName>Rimgate_CorticalDampener</defName>
        <hediffClass>Hediff_Implant</hediffClass>
        <label>cortical dampener</label>
        <labelNoun>a cortical dampener</labelNoun>
        <defaultLabelColor>(232, 56, 27)</defaultLabelColor>
        <description>A crude neural implant designed to suppress higher cognitive functions and enforce obedience. Used by the Goa'uld to control Unas and other laborers, this device dulls critical thinking and emotional response, making the host more compliant but also more prone to rage when mistreated.</description>
        <descriptionHyperlinks>
            <ThingDef>Rimgate_CorticalDampener</ThingDef>
        </descriptionHyperlinks>

        <isBad>false</isBad>
        <countsAsAddedPartOrImplant>true</countsAsAddedPartOrImplant>
        <defaultInstallPart>Brain</defaultInstallPart>
        <addedPartProps>
            <solid>true</solid>
        </addedPartProps>

        <spawnThingOnRemoved>Rimgate_CorticalDampener</spawnThingOnRemoved>

        <stages>
            <li>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <setMax>0.95</setMax>
                    </li>
                </capMods>
            </li>
        </stages>

        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>

    </HediffDef>

    <!-- ==================== Cortical Catalyst ==================== -->

    <HediffDef>
        <defName>Rimgate_CorticalCatalyst</defName>
        <hediffClass>Hediff_Implant</hediffClass>
        <label>cortical catalyst</label>
        <labelNoun>a cortical catalyst</labelNoun>
        <defaultLabelColor>(232, 157, 27)</defaultLabelColor>
        <description>A modified neural implant derived from the cortical dampener design. This version enhances cognitive function and allows for direct mental control by the user, unlocking latent abilities and heightened awareness. While it offers significant advantages, the implant can also lead to increased mental strain and occasional uncontrollable outbursts of power.</description>
        <descriptionHyperlinks>
            <ThingDef>Rimgate_CorticalCatalyst</ThingDef>
        </descriptionHyperlinks>

        <isBad>false</isBad>
        <priceImpact>true</priceImpact>
        <countsAsAddedPartOrImplant>true</countsAsAddedPartOrImplant>
        <defaultInstallPart>Brain</defaultInstallPart>
        <addedPartProps>
            <solid>true</solid>
        </addedPartProps>

        <spawnThingOnRemoved>Rimgate_CorticalCatalyst</spawnThingOnRemoved>

        <stages>
            <li>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>0.10</offset>
                    </li>
                </capMods>
            </li>
        </stages>

        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>

        <comps>
            <li Class="VEF.AnimalBehaviours.HediffCompProperties_Draftable">
                <makeNonFleeingToo>true</makeNonFleeingToo>
            </li>
            <li Class="Rimgate.HediffCompProperties_ReplacesHediffs">
                <hediffDefs>
                    <li>Rimgate_CorticalDampener</li>
                </hediffDefs>
                <spawnAnyThings>true</spawnAnyThings>
            </li>
        </comps>
    </HediffDef>

</Defs>