<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<Operation Class="PatchOperationSequence">
		<operations>

			<!-- Allow traders to stock GlyphScraps -->

			<li Class="PatchOperationAdd">
				<xpath>Defs/TraderKindDef[
					defName = "Base_Neolithic_Standard" or
					defName = "Caravan_Neolithic_ShamanMerchant" or
					defName = "Base_Outlander_Standard" or
					defName = "Caravan_Outlander_Exotic" or
					defName = "Orbital_Exotic"
					]/stockGenerators</xpath>
				<value>
					<li Class="StockGenerator_SingleDef">
						<thingDef>Rimgate_GlyphParchment</thingDef>
						<price>Expensive</price>
						<countRange>0~2</countRange>
					</li>
					<li Class="StockGenerator_BuySingleDef">
						<thingDef>Rimgate_Naquadah</thingDef>
					</li>
				</value>
			</li>

			<li Class="PatchOperationAdd">
				<xpath>Defs/TraderKindDef[
					defName = "Caravan_Outlander_Exotic" or
					defName = "Orbital_Exotic"
					]/stockGenerators</xpath>
				<value>
					<li Class="StockGenerator_BuySingleDef">
						<thingDef>Rimgate_Naquadria</thingDef>
					</li>
				</value>
			</li>

			<!-- Prevent any traders from selling Sarcophagus buildings -->

			<li Class="PatchOperationConditional">
				<xpath>Defs/TraderKindDef/stockGenerators/li[categoryDef="BuildingsFurniture"]/excludedThingDefs</xpath>
				<nomatch Class="PatchOperationAdd">
					<xpath>Defs/TraderKindDef/stockGenerators/li[categoryDef="BuildingsFurniture"]</xpath>
					<value>
						<excludedThingDefs />
					</value>
				</nomatch>
			</li>

			<li Class="PatchOperationAdd">
				<xpath>Defs/TraderKindDef/stockGenerators/li[categoryDef="BuildingsFurniture"]/excludedThingDefs</xpath>
				<value>
					<li>Rimgate_GoauldSarcophagus</li>
				</value>
			</li>

			<!-- Make VanometicPowerCell tradeable -->

			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="VanometricPowerCell"]/tradeability</xpath>
				<value>
					<tradeability>All</tradeability>
				</value>
			</li>

		</operations>
	</Operation>
</Patch>