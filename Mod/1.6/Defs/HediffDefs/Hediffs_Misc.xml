<?xml version="1.0" encoding="UTF-8"?>
<Defs>

    <!-- ==================== Symbiote Withdrawal ==================== -->

    <HediffDef>
        <defName>Rimgate_SymbioteWithdrawal</defName>
        <label>symbiote withdrawal</label>
        <description>With the symbiote removed, the host's body begins to crash—systems falter, strength fades, and paranoia skyrockets. Symptoms include fatigue, tremors, organ failure, rapid aging, and regretting life choices involving glowing eyes.\n\nWithout an artificial replacement like tretonin—or another symbiote—this condition is usually terminal.</description>
        <descriptionHyperlinks>
            <ThingDef>Rimgate_Tretonin</ThingDef>
        </descriptionHyperlinks>
        <hediffClass>HediffWithComps</hediffClass>
        <chronic>true</chronic>
        <minSeverity>0.001</minSeverity>
        <initialSeverity>0.01</initialSeverity>
        <lethalSeverity>1</lethalSeverity>
        <everCurableByItem>false</everCurableByItem>
        <tendable>true</tendable>
        <comps>
            <li Class="HediffCompProperties_Immunizable">
                <severityPerDayNotImmune>0.25</severityPerDayNotImmune>
            </li>
            <li Class="HediffCompProperties_TendDuration">
                <severityPerDayTended>-0.8</severityPerDayTended>
                <baseTendDurationHours>23</baseTendDurationHours>
            </li>
        </comps>
        <stages>
            <li>
                <label>minor</label>
                <forgetMemoryThoughtMtbDays>7</forgetMemoryThoughtMtbDays>
                <statFactors>
                    <RestFallRateFactor>2</RestFallRateFactor>
                    <ImmunityGainSpeed>0</ImmunityGainSpeed>
                    <InjuryHealingFactor>0</InjuryHealingFactor>
                </statFactors>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-0.1</offset>
                    </li>
                    <li>
                        <capacity>BloodFiltration</capacity>
                        <offset>-0.1</offset>
                    </li>
                </capMods>
            </li>
            <li>
                <label>extreme</label>
                <minSeverity>0.5</minSeverity>
                <lifeThreatening>true</lifeThreatening>
                <deathMtbDays>15</deathMtbDays>
                <painOffset>0.5</painOffset>
                <partEfficiencyOffset>-0.3</partEfficiencyOffset>
                <statFactors>
                    <RestFallRateFactor>5</RestFallRateFactor>
                    <ImmunityGainSpeed>0</ImmunityGainSpeed>
                    <InjuryHealingFactor>0</InjuryHealingFactor>
                </statFactors>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-0.2</offset>
                    </li>
                    <li>
                        <capacity>BloodFiltration</capacity>
                        <offset>-0.30</offset>
                    </li>
                    <li>
                        <capacity>BloodPumping</capacity>
                        <offset>-0.15</offset>
                    </li>
                    <li>
                        <capacity>Metabolism</capacity>
                        <offset>-0.20</offset>
                    </li>
                    <li>
                        <capacity>Breathing</capacity>
                        <offset>-0.10</offset>
                    </li>
                </capMods>
            </li>
        </stages>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- =============== Clones =============== -->

    <!-- Hidden Trackers -->

    <HediffDef>
        <defName>Hediff_ClonedTracker</defName>
        <label>clone tracker (hidden)</label>
        <description>This hediff stores tracking data to determine how many times this pawn has been cloned.</description>
        <hediffClass>Rimgate.Hediff_ClonedTracker</hediffClass>
        <defaultLabelColor>(0.65, 0.3, 0.9)</defaultLabelColor>
        <isBad>false</isBad>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef>
        <defName>Rimgate_Clone</defName>
        <label>clone (hidden)</label>
        <description>Another happy accident of mad science. Don't worry — they only think they’re the original.</description>
        <hediffClass>Rimgate.Hediff_Clone</hediffClass>
        <defaultLabelColor>(0.65, 0.3, 0.9)</defaultLabelColor>
        <isBad>false</isBad>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef>
        <defName>Rimgate_CloneRandom</defName>
        <label>clone (hidden)</label>
        <description>Another happy accident of mad science. Don't worry — they only think they’re the original.</description>
        <hediffClass>Rimgate.Hediff_Clone</hediffClass>
        <defaultLabelColor>(0.65, 0.3, 0.9)</defaultLabelColor>
        <isBad>false</isBad>
        <comps>
            <li>
                <compClass>Rimgate.HediffComp_RandomCloneGeneration</compClass>
            </li>
        </comps>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- Enduring -->

    <HediffDef>
        <hediffClass>HediffWithComps</hediffClass>
        <defName>Rimgate_ClonedEnduring</defName>
        <label>enduring</label>
        <description>Cloning has granted the patient a heightened sense of endurance and resilience. They are now more capable of withstanding immense physical and mental stress before succumbing to exhaustion.</description>
        <defaultLabelColor>(0.65, 0.3, 0.9)</defaultLabelColor>
        <initialSeverity>1</initialSeverity>
        <maxSeverity>1</maxSeverity>
        <isBad>false</isBad>
        <stages>
            <li>
                <painOffset>-0.5</painOffset>
                <statOffsets>
                    <MeleeHitChance>2</MeleeHitChance>
                    <MeleeDodgeChance>2</MeleeDodgeChance>
                    <ShootingAccuracyPawn>2</ShootingAccuracyPawn>
                    <MoveSpeed>1</MoveSpeed>
                    <InjuryHealingFactor>1.5</InjuryHealingFactor>
                </statOffsets>
            </li>
        </stages>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>


    <!-- =============== Mobile Container debuffs =============== -->

    <HediffDef>
        <defName>Rimgate_PushingCart</defName>
        <label>pushing a cart</label>
        <description>The strain of pushing a loaded cart reduces movement speed.</description>
        <hediffClass>Hediff</hediffClass>
        <tendable>false</tendable>
        <stages>
            <!-- light -->
            <li>
                <minSeverity>0.1</minSeverity>
                <capMods>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.02</offset>
                    </li>
                </capMods>
            </li>
            <li>
                <minSeverity>0.5</minSeverity>
                <capMods>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.08</offset>
                    </li>
                </capMods>
            </li>
            <!-- heavy -->
            <li>
                <minSeverity>0.8</minSeverity>
                <capMods>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.15</offset>
                    </li>
                </capMods>
            </li>
        </stages>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- =============== ARCHOTECH IDOL OF RESONANCE =============== -->

    <!-- Hidden short-duration buffs the comp refreshes -->

    <HediffDef>
        <defName>Rimgate_ResonanceFieldBuff</defName>
        <label>resonance field</label>
        <description>The idol’s harmonic field eases the mind and steadies the hands.</description>
        <hediffClass>HediffWithComps</hediffClass>
        <isBad>false</isBad>
        <tendable>false</tendable>
        <initialSeverity>0.1</initialSeverity>
        <comps>
            <li Class="HediffCompProperties_Disappears">
                <disappearsAfterTicks>1200</disappearsAfterTicks>
                <showRemainingTime>false</showRemainingTime>
            </li>
        </comps>
        <stages>
            <li>
                <becomeVisible>false</becomeVisible> <!-- Keep it invisible to players -->
                <statOffsets>
                    <MoveSpeed>0.05</MoveSpeed>  <!-- +5% -->
                    <MentalBreakThreshold>-0.10</MentalBreakThreshold> <!-- 10% easier to avoid breaks -->
                    <PsychicSensitivity>0.05</PsychicSensitivity>
                </statOffsets>
            </li>
        </stages>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <HediffDef>
        <defName>Rimgate_ResonanceHostBoost</defName>
        <label>resonance attunement</label>
        <description>The idol’s harmonic field eases the mind of your symbiote.</description>
        <hediffClass>HediffWithComps</hediffClass>
        <isBad>false</isBad>
        <tendable>false</tendable>
        <initialSeverity>0.1</initialSeverity>
        <comps>
            <li Class="HediffCompProperties_Disappears">
                <disappearsAfterTicks>1200</disappearsAfterTicks>
                <showRemainingTime>false</showRemainingTime>
            </li>
        </comps>
        <stages>
            <li>
                <becomeVisible>false</becomeVisible> <!-- Keep it invisible to players -->
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>0.10</offset> <!-- Goa'uld host synergy -->
                    </li>
                </capMods>
            </li>
        </stages>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- =============== Unrecruitable =============== -->

    <HediffDef>
        <defName>Rimgate_Unrecruitable</defName>
        <label>unwavering loyalty</label>
        <description>This pawn’s conditioning prevents defection or recruitment by any means.</description>
        <hediffClass>HediffWithComps</hediffClass>
        <isBad>false</isBad>
        <tendable>false</tendable>
        <stages>
            <li>
                <becomeVisible>false</becomeVisible> <!-- Keep it invisible to players -->
                <statOffsets>
                    <MentalBreakThreshold>-0.04</MentalBreakThreshold>
                </statOffsets>
            </li>
        </stages>
        <comps>
            <li>
                <compClass>Rimgate.HediffComp_Unrecruitable</compClass>
            </li>
        </comps>
        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>
    </HediffDef>

    <!-- =============== Regenerating Tissue =============== -->

    <HediffDef>
        <defName>Rimgate_RegeneratingTissue</defName>
        <hediffClass>HediffWithComps</hediffClass>
        <label>regenerating</label>
        <labelNoun>regenerating tissue</labelNoun>
        <defaultLabelColor>(220,200,180)</defaultLabelColor>
        <description>Fresh regrown tissue. It works, but is fragile and painful while it stabilizes.</description>

        <isBad>false</isBad>
        <tendable>false</tendable>
        <everCurableByItem>false</everCurableByItem>
        <makesSickThought>false</makesSickThought>

        <minSeverity>0</minSeverity>
        <maxSeverity>99</maxSeverity>

        <stages>
            <li>
                <!-- light, temporary penalties; tune as desired -->
                <painOffset>0.02</painOffset>
                <capMods>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.05</offset>
                    </li>
                </capMods>
                <statFactors>
                    <WorkSpeedGlobal>0.95</WorkSpeedGlobal>
                </statFactors>
            </li>
        </stages>

        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>

        <comps>
            <li Class="HediffCompProperties_SeverityPerDay">
                <severityPerDay>-8</severityPerDay>
                <showDaysToRecover>true</showDaysToRecover>
            </li>
        </comps>
    </HediffDef>

    <HediffDef>
        <defName>Rimgate_NaniteRegeneration</defName>
        <label>nanite regeneration</label>
        <defaultLabelColor>(232, 157, 27)</defaultLabelColor>
        <hediffClass>HediffWithComps</hediffClass>
        <description>Nanites coursing through the body continuously repair injuries and regenerate missing parts, significantly accelerating the healing process-even in extreme conditions, like being dead.</description>
        <isBad>false</isBad>
        <everCurableByItem>false</everCurableByItem>
        <keepOnBodyPartRestoration>true</keepOnBodyPartRestoration>

        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>

        <comps>
            <li Class="Rimgate.HediffCompProperties_Regeneration">
                <regeneratingHediff>Rimgate_RegeneratingNanites</regeneratingHediff>
                <checkIntervalTicks>60</checkIntervalTicks>
                <regenerateMissingTimeFactor>0.72</regenerateMissingTimeFactor>
                <healInjuries>true</healInjuries>
                <healInjuryChance>0.5</healInjuryChance>
                <healPermanentInjuries>true</healPermanentInjuries>
                <healChronics>true</healChronics>
                <healInjuryChance>0.25</healInjuryChance>
                <showHealingFleck>true</showHealingFleck>
                <healingFleckInterval>120</healingFleckInterval>
                <canResurrect>true</canResurrect>
                <restoreMechWeaponOnDeath>true</restoreMechWeaponOnDeath>
                <resurrectionMessageKey>RG_NaniteResurrection_Message</resurrectionMessageKey>
            </li>
        </comps>
    </HediffDef>

    <HediffDef>
        <defName>Rimgate_RegeneratingNanites</defName>
        <hediffClass>HediffWithComps</hediffClass>
        <label>regenerating</label>
        <labelNoun>regenerating nanites</labelNoun>
        <defaultLabelColor>(220,200,180)</defaultLabelColor>
        <description>Nanites actively repairing damage. It works, but is fragile until it stabilizes.</description>

        <isBad>false</isBad>
        <tendable>false</tendable>
        <everCurableByItem>false</everCurableByItem>
        <makesSickThought>false</makesSickThought>

        <minSeverity>0</minSeverity>
        <maxSeverity>99</maxSeverity>

        <stages>
            <li>
                <capMods>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.05</offset>
                    </li>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>-0.05</offset>
                    </li>
                    <li>
                        <capacity>BloodFiltration</capacity>
                        <offset>-0.05</offset>
                    </li>
                    <li>
                        <capacity>BloodPumping</capacity>
                        <offset>-0.05</offset>
                    </li>
                </capMods>
            </li>
        </stages>

        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>

        <comps>
            <li Class="HediffCompProperties_SeverityPerDay">
                <severityPerDay>-8</severityPerDay>
                <showDaysToRecover>true</showDaysToRecover>
            </li>
        </comps>
    </HediffDef>

    <!-- ==================== Una Biosignature ==================== -->

    <HediffDef>
        <defName>Rimgate_UnasBiosignature</defName>
        <hediffClass>HediffWithComps</hediffClass>
        <label>Unas biosignature (hidden)</label>
        <description>A unique biosignature implant characteristic of the Unas species, allowing for specialized tracking and identification.</description>

        <isBad>false</isBad>
        <everCurableByItem>false</everCurableByItem>

        <stages>
            <li>
                <becomeVisible>false</becomeVisible>
            </li>
        </stages>

        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>

        <comps>
            <li Class="Rimgate.HediffCompProperties_SurgeryInspectionBiosignature">
                <biosignatureThingDef>Rimgate_UnasBiosignature</biosignatureThingDef>
                <preventLetterIfPreviouslyDetected>true</preventLetterIfPreviouslyDetected>
            </li>
        </comps>
    </HediffDef>

    <!-- ==================== Wild prim’ta takeover ==================== -->

    <HediffDef>
        <defName>Rimgate_WildPrimtaTakeover</defName>
        <hediffClass>HediffWithComps</hediffClass>
        <label>feral takeover</label>
        <labelNoun>a takeover</labelNoun>
        <defaultLabelColor>(0.9, 1.0, 0.35)</defaultLabelColor>

        <description>A feral prim’ta is attempting an untrained bond—thrashing through the nervous system and pushing toward the brain.\n\nWithout urgent treatment, the host will suffer catastrophic neurological failure.</description>
        <descriptionShort>Effects of a feral prim’ta attempting an untrained bond</descriptionShort>

        <initialSeverity>0.01</initialSeverity>
        <minSeverity>0</minSeverity>
        <lethalSeverity>1.0</lethalSeverity>
        <tendable>true</tendable>
        <everCurableByItem>false</everCurableByItem>

        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>

        <comps>
            <!-- severity ramps up over time -->
            <li Class="HediffCompProperties_RandomizeSeverityPhases">
                <ticksToRandomize>60000~90000</ticksToRandomize> <!-- 1-2 days -->
                <notifyMessage>{PAWN_labelShort}'s chance of fighting the wild prim’ta takeover went from {1} to {2}.</notifyMessage>
                <phases>
                    <li>
                        <labelPrefix>grave</labelPrefix>
                        <descriptionExtra>that are life threatening without exceptional medical care and glitterworld medicine.</descriptionExtra>
                        <severityPerDay>0.42</severityPerDay>
                    </li>
                    <li>
                        <labelPrefix>bad</labelPrefix>
                        <descriptionExtra>that are life threatening without good medical care and standard medicine.</descriptionExtra>
                        <severityPerDay>0.3</severityPerDay>
                    </li>
                    <li>
                        <labelPrefix>common</labelPrefix>
                        <descriptionExtra>that can be life threatening without basic medicine and tending.</descriptionExtra>
                        <severityPerDay>0.1</severityPerDay>
                    </li>
                    <li>
                        <labelPrefix>mild</labelPrefix>
                        <descriptionExtra>which make the victim slightly ill but, at this rate, they will fight it off on their own.</descriptionExtra>
                        <severityPerDay>-0.18</severityPerDay>
                    </li>
                </phases>
            </li>

            <!-- tending fights it back -->
            <li Class="HediffCompProperties_TendDuration">
                <baseTendDurationHours>18</baseTendDurationHours> <!-- 0.5 day -->
                <tendOverlapHours>6</tendOverlapHours>
                <disappearsAtTotalTendQuality>3</disappearsAtTotalTendQuality>
                <severityPerDayTended>-0.35</severityPerDayTended>
            </li>
        </comps>

        <stages>
            <li>
                <minSeverity>0.10</minSeverity>
                <painFactor>1.2</painFactor>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-0.05</offset>
                    </li>
                </capMods>
            </li>

            <li>
                <minSeverity>0.35</minSeverity>
                <painFactor>1.5</painFactor>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-0.15</offset>
                    </li>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>-0.10</offset>
                    </li>
                </capMods>
            </li>

            <li>
                <minSeverity>0.70</minSeverity>
                <lifeThreatening>true</lifeThreatening>
                <painFactor>2.0</painFactor>
                <vomitMtbDays>1.0</vomitMtbDays>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-0.35</offset>
                    </li>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>-0.25</offset>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.25</offset>
                    </li>
                </capMods>
            </li>
        </stages>
    </HediffDef>

    <!-- ==================== Tok'ra tunnel crystal after-effect ==================== -->

    <HediffDef ParentName="DiseaseBase">
        <defName>Rimgate_CrystalResonanceEffect</defName>
        <label>crystal resonance</label>
        <labelNoun>crystal resonance effect</labelNoun>
        <description>After being exposed to the crystal tunnel, the patient experiences a lingering resonance in their nervous system. This causes a persistent buzzing sensation, heightened sensitivity to stimuli, and mild tremors. The effect is temporary but can be quite uncomfortable.</description>
        <isBad>true</isBad>
        <initialSeverity>1</initialSeverity>
        <maxSeverity>1</maxSeverity>

        <duplicationAllowed>false</duplicationAllowed>
        <allowMothballIfLowPriorityWorldPawn>true</allowMothballIfLowPriorityWorldPawn>

        <stages>
            <li>
                <label>buzzing</label>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-0.1</offset>
                    </li>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>-0.1</offset>
                    </li>
                </capMods>
                <hungerRateFactor>1.5</hungerRateFactor>
                <statFactors>
                    <RestFallRateFactor>1.5</RestFallRateFactor>
                </statFactors>
            </li>
        </stages>

        <comps>
            <li Class="HediffCompProperties_Disappears">
                <disappearsAfterTicks>45000~120000</disappearsAfterTicks>
            </li>
            <li Class="HediffCompProperties_SeverityPerDay">
                <severityPerDay>-0.8</severityPerDay>
            </li>
        </comps>
    </HediffDef>

</Defs>